<html>
    <head>
        <title>
            <%= title %>
        </title>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.4/noty.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/noty/3.1.1/noty.min.js"></script>
    </head>
    <body>
        <h1>hey this is home</h1>
        <ul>
            <% if(locals.user){%>
                <li>
                    <%=user.name%>
                </li>
                <li>
                    <a href="/users/sign-out">Sign-Out</a>
                </li>
            <%}else {%>
                <li>
                    <a href="/users/sign-in">Sign-In</a>
                </li>
                <li>
                    <a href="/users/sign-up">Sign-Up</a>
                </li>
              <%}%>  
        </ul>
        <section id="feed-posts">
            <h4>Post</h4>
            <% if(locals.user){%>
            <form action="/posts/create" id="new-post-form" method="post">
                <textarea name="content" row="3" col="30" placeholder="type here" required></textarea><br>
                <input type="submit" value="post">

            </form>
            <% } %>
            <div id="posts-list-container">
                
                <ul>
                    //this is 
                    <%for(post of posts){%>
                        <%- include('_post') -%> 
                   <% } %>
                    
                </ul>
                
            </div>

        </section>
        <section id="user_friend">
            <h4>Friends</h4>
            <% for(u of all_users){%>

                <p>
                    <a href="/users/profile/<%=u.id%>"><%=u.name%></a>
                </p>
            <%}%>

        </section>
    <script >
        <%if(flash.success && flash.success.length>0){%>
            new Noty(
                {
                    theme:'relax',
                    text:"<%= flash.success%>",
                    type:'success',
                    layout:'topRight',
                    timeout:1500
                }
            ).show();
            <%}%>
        <%if(flash.error && flash.error.length>0){%>
            new Noty(
                {
                    theme:'relax',
                    text:"<%= flash.error%>",
                    type:'error',
                    layout:'topRight',
                    timeout:1500
                }
            ).show();
            <%}%>
    </script>
    </body>
</html>